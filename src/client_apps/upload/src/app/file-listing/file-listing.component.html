<h2>Available Files</h2>

<ng-container *ngIf="files$ | async as files">
    <p *ngIf="files.length == 0">No files available</p>

    <table *ngIf="files.length > 0" class="table table-striped table-hover table-sm">
        <tr>
            <th *ngIf="showUsername$ | async">User</th>
            <th>Filename</th>
            <th>Uploaded</th>
            <th>Size</th>
            <th class="text-center">Download</th>
            <th class="text-center">Delete</th>
        </tr>

        <tr *ngFor="let file of files">
            <td *ngIf="showUsername$ | async">{{file.username}}</td>
            <td>{{file.filename}}</td>
            <td>{{file.creationTime | relativeDate}}</td>
            <td>{{file.sizeInBytes | fileSize}}</td>
            <td class="text-center">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" [(ngModel)]="file.isDownloadChecked" />
                </div>
            </td>
            <td class="text-center">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" [(ngModel)]="file.isDeleteChecked" />
                </div>
            </td>
        </tr>

        <tr>
            <td *ngIf="showUsername$ | async"></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-center">
                <button type="submit" (click)="downloadSelected()" class="btn btn-primary">Download</button>
            </td>
            <td class="text-center">
                <button type="submit" (click)="deleteSelected()" class="btn btn-danger">Delete</button>
            </td>
        </tr>
    </table>
</ng-container>
