<h2>Available Files</h2>

@if(Model.AvailableFiles.Count == 0) {
    <p>No files available</p>
}
else {
    <form id="deleteDownloadForm" method="post" asp-controller="upload" asp-action="delete" autocomplete="off" role="form">
        <table class="table table-striped table-hover table-sm">
            <tr>
                @if(Model.ShowUsernameColumn) {
                    <th>User</th>
                }
                <th>Name</th>
                <th>Created</th>
                <th>Size</th>
                <th class="text-center">Download</th>
                <th class="text-center">Delete</th>
            </tr>

            @foreach(var file in Model.AvailableFiles) {
                <tr>
                    @if(Model.ShowUsernameColumn) {
                        <td>@file.Username</td>
                    }
                    <td>@file.Filename</td>
                    <td>@file.CreationTime.Humanize(utcDate: false)</td>
                    <td>@file.SizeInBytes.Bytes().ToString("#,###.#")</td>
                    <td class="text-center">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" name="downloadFiles" value="@file.RelativePath" />
                        </div>
                    </td>
                    <td class="text-center">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" name="deleteFiles" value="@file.RelativePath" />
                        </div>
                    </td>
                </tr>
            }
        </table>

        <div class="form-group">
            <button type="submit" id="downloadButton" class="btn btn-primary">Download Files</button>
            <button type="submit" id="deleteButton" class="btn btn-danger">Delete Files</button>
        </div>
    </form>
}
