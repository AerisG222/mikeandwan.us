<div class="row">
    <div class="col-xs-12">
        <div *ngIf="!context.isCategoryMode" class="row">
            <div class="col-xs-12">
                <category-link [category]="category"></category-link>
            </div>
        </div>
    	<div class="row main-image" [ngClass]="{hide_main_image_border: category}">
            <div class="col-xs-12 vcenter text-center">
        		<img [src]="getPhotoPath()" [ngClass]="rotationClassArray[context.current.rotationClassIndex]" [ngStyle]="{'max-width': rotationContainmentMaxWidth, 'max-height': rotationContainmentMaxHeight}" />
        		<a class="prev" [hidden]="!context.hasPrevious" (click)="context.movePrevious()"><i class="fa fa-arrow-circle-left"></i></a>
        		<a class="next" [hidden]="!context.hasNext" (click)="context.moveNext()"><i class="fa fa-arrow-circle-right"></i></a>
            </div>
    	</div>
    	<div class="row toolbar hidden-xs">
            <div class="left col-sm-4">
                <div class="btn-group">
            		<button type="button" class="btn btn-default btn-xs" (click)="toggleComments()" [ngClass]="{active: showComments}"><i class="fa fa-comment"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="toggleRatings()" [ngClass]="{active: showRatings}"><i class="fa fa-star"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="toggleExif()" [ngClass]="{active: showExif}"><i class="fa fa-info-circle"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="rotate(-1)"><i class="fa fa-rotate-left"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="rotate(1)"><i class="fa fa-rotate-right"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="toggleHistogram()" [ngClass]="{active: showHistogram}" [hidden]="!showHistogramButton"><i class="fa fa-bar-chart-o"></i></button>
                    <button type="button" class="btn btn-default btn-xs" (click)="toggleFullscreen()"><i class="fa fa-expand"></i></button>
                    <button type="button" class="btn btn-default btn-xs" (click)="toggleHelp()"><i class="fa fa-keyboard-o"></i></button>
                    <button type="button" class="btn btn-default btn-xs" [hidden]="!supportCssFilters" (click)="toggleEffects()" [ngClass]="{active: showEffects}"><i class="fa fa-adjust"></i></button>
                </div>
            </div>
            <div class="text-center col-sm-4">
                <div class="btn-group">
            		<button type="button" class="btn btn-default btn-xs" (click)="showDownload(photo.smInfo)"><i class="fa fa-image thumb-size"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="showDownload(photo.mdInfo)"><i class="fa fa-image full-size"></i></button>
            		<button type="button" class="btn btn-default btn-xs" (click)="showDownload(photo.lgInfo)"><i class="fa fa-image"></i></button>
                </div>
            </div>
            <div class="right col-sm-4">
                <div class="btn-group pull-right">
                    <slideshow-button [context]="context"></slideshow-button>
                </div>
            </div>
    	</div>

        <div class="row">
        	<div class="col-sm-12 hidden-xs photo-info" *ngIf="showComments"><comment-view [photo]="photo"></comment-view></div>
        	<div class="col-sm-offset-2 col-sm-8 hidden-xs photo-info" *ngIf="showRatings"><rating-view [photo]="photo"></rating-view></div>
        	<div class="col-sm-offset-2 col-sm-8 hidden-xs photo-info exif" *ngIf="showExif"><exif-view [photo]="context?.current"></exif-view></div>
            <div class="col-sm-offset-2 col-sm-8 hidden-xs photo-info" *ngIf="showEffects"><effects-view [photo]="context?.current" (update)="onFiltersUpdated($event)"></effects-view></div>
            <div class="col-sm-offset-2 col-sm-8 photo-info" *ngIf="showFullscreen"><fullscreen-view [context]="context"></fullscreen-view></div>
        </div>
    </div>
</div>

<help-dialog></help-dialog>
<save-dialog></save-dialog>
