<h2>Available Files</h2>

<p *ngIf="files.length == 0">No files available</p>

<table *ngIf="files.length > 0" class="table table-striped table-hover table-sm">
    <tr>
        <th *ngIf="showUsername$ | async">User</th>
        <th></th>
        <th>Filename</th>
        <th>Uploaded</th>
        <th>Size</th>
        <th class="text-center">Download</th>
        <th class="text-center">Delete</th>
        <th class="text-center"><input type="checkbox" class="align-middle" (click)="toggleFiles(toggle.checked)" #toggle /></th>
    </tr>

    <tr *ngFor="let file of files; trackBy: trackByFile" [@listItemAnimation]>
        <td *ngIf="showUsername$ | async" class="align-middle">{{file.location.username}}</td>
        <td class="align-middle"><app-file-thumbnail [relativeFilePath]="file.location.relativePath"></app-file-thumbnail></td>
        <td class="align-middle">{{file.location.filename}}</td>
        <td class="align-middle">{{file.creationTime | relativeDate}}</td>
        <td class="align-middle">{{file.sizeInBytes | fileSize}}</td>
        <td class="align-middle text-center text-success">
            <app-svg-icon [icon]="svgIcon.Download" [klass]="'hover mr-2'" (click)="downloadSingle(file)"></app-svg-icon>
        </td>
        <td class="align-middle text-center text-danger">
            <app-svg-icon [icon]="svgIcon.Trash" [klass]="'hover mr-2'" (click)="deleteSingle(file)"></app-svg-icon>
        </td>
        <td class="align-middle text-center"><input type="checkbox" class="mt-2" [(ngModel)]="file.isChecked" /></td>
    </tr>

    <tr>
        <td *ngIf="showUsername$ | async"></td>
        <td colspan="7" class="text-right">
            <button type="submit" (click)="downloadSelected()" class="btn btn-primary btn-sm ml-2" mawFocusRemover>
                <app-svg-icon [icon]="svgIcon.Download"></app-svg-icon> Download Selected
            </button>
            <button type="submit" (click)="deleteSelected()" class="btn btn-danger btn-sm ml-2" mawFocusRemover>
                <app-svg-icon [icon]="svgIcon.Trash"></app-svg-icon> Delete Selected
            </button>
        </td>
    </tr>
</table>
