@{
    ViewBag.Title = "photos 3d"; 
    Layout = "_LayoutMinimal";
}

@section custom_head {
    @Html.Partial("_css_Bootstrap")
    @Html.Partial("_css_site")
    <style>
        body { margin: 0; padding: 0; }
        canvas { width: 99%; height: 99% }
    </style>
}

@Html.Partial("_js_Systemjs")
@Html.Partial("_js_Threejs")
@Html.Partial("_js_Mousetrap")

@* http://stemkoski.github.io/Three.js/Shader-Animate.html *@
<script id="waterVertexShader" type="x-shader/x-vertex">
varying vec2 vUv;
void main() 
{ 
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
</script>

<script id="waterFragmentShader" type="x-shader/x-vertex"> 
uniform sampler2D baseTexture;
uniform float baseSpeed;
uniform sampler2D noiseTexture;
uniform float noiseScale;
uniform float alpha;
uniform float time;

varying vec2 vUv;
void main() 
{
	vec2 uvTimeShift = vUv + vec2( -0.7, 1.5 ) * time * baseSpeed;	
	vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift );
	vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.b );
	vec4 baseColor = texture2D( baseTexture, uvNoiseTimeShift );

	baseColor.a = alpha;
	gl_FragColor = baseColor;
}  
</script>

<script>
    System.config({
        baseURL: "/js/photos3d",
        defaultJSExtensions: true
    });

    System.import('app');
</script>
