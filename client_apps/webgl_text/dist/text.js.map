{"version":3,"file":"text.js","sourceRoot":"","sources":["home/mmorano/git/mikeandwan.us/client_apps/webgl_text/text.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"./typings/browser.d.ts\" />\n\njQuery(function() {\n\tlet demo = new TextDemo();\n\tdemo.run();\n});\n\nclass TextDemo {\n\tscene: THREE.Scene;\n\tcamera: THREE.PerspectiveCamera;\n\trenderer: THREE.Renderer;\n\ttextMesh: THREE.Mesh;\n\ttextPivot: THREE.Object3D;\n\tambientLight: THREE.AmbientLight;\n\tspotLight: THREE.SpotLight;\n\tstats: Stats;\n    font: THREE.Font;\n\trotationAngle: number;\n    animate = false;\n\n\trun() {\n\t\tthis.prepareScene();\n\t\tthis.render();\n\t}\n\n\tprepareScene() {\n\t\t// scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.scene.fog = new THREE.Fog(0x449999, 400, 1000);\n\n\t\t// renderer\n\t\tthis.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\t\tdocument.body.appendChild(this.renderer.domElement);\n\n\t\t// stats\n\t\tthis.stats = new Stats();\n\t\tthis.stats.domElement.style.position = 'absolute';\n\t\tthis.stats.domElement.style.top = '0px';\n\t\tdocument.body.appendChild(this.stats.domElement);\n\n\t\t// axis helper\n\t\tlet axisHelper = new THREE.AxisHelper(100);\n\t\tthis.scene.add(axisHelper);\n\n\t\t// camera\n\t\tthis.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n\t\tthis.camera.position.set(0, 140, 400);\n\t\tthis.camera.lookAt(this.scene.position);\n\n\t\t// ambient light\n\t\tthis.ambientLight = new THREE.AmbientLight(0x404040);\n\t\tthis.scene.add(this.ambientLight);\n\n\t\tlet directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n\t\tdirectionalLight.position.set(0, 1, 0);\n\t\tthis.scene.add(directionalLight);\n\n\t\t// spot light\n\t\tthis.spotLight = new THREE.SpotLight(0xffffff);\n\t\tthis.spotLight.position.set(-60, 200, 100);\n\t\tthis.spotLight.castShadow = true;\n\t\tthis.scene.add(this.spotLight);\n\n\t\t// floor\n\t\tlet floorPlane = new THREE.PlaneGeometry(1000, 1000);\n\t\tlet floorTexture = THREE.ImageUtils.loadTexture('/img/webgl/floor_texture.jpg');\n\t\tfloorTexture.wrapS = THREE.RepeatWrapping;\n\t\tfloorTexture.wrapT = THREE.RepeatWrapping;\n\t\tfloorTexture.repeat.set(24, 24);\n\t\tlet floorMaterial = new THREE.MeshBasicMaterial({ map: floorTexture, side: THREE.DoubleSide });\n\t\tlet floor = new THREE.Mesh(floorPlane, floorMaterial);\n\t\tfloor.position.y = -30;\n\t\tfloor.rotation.x = (Math.PI / 2) - 0.2;\n\t\tthis.scene.add(floor);\n\n\t\t// setup initial rotation\n\t\tthis.rotationAngle = 0.015;\n\n        // prepare textMesh\n        this.prepareText();\n\t}\n\n    prepareText() {\n        let loader = new THREE.FontLoader();\n\n        loader.load('/js/libs/fonts/open_sans_bold.typeface.js', response => {\n            // text\n            let textGeometry = new THREE.TextGeometry('WebGL', {\n                font: response,\n                size: 60,\n                curveSegments: 48,\n                height: 24,\n\t\t\t\tbevelEnabled: false,\n\t\t\t\tbevelThickness: 0,\n\t\t\t\tbevelSize: 0\n            });\n\n\t\t\t//textGeometry.weight = 'bold';\n\t\t\t//textGeometry.style = 'normal';\n\n            let textMaterial = new THREE.MeshPhongMaterial({\n                color: 0x006051,\n                specular: 0xffffff,\n                shininess: 50\n            });\n\n            textGeometry.computeBoundingBox();\n            let textWidth = textGeometry.boundingBox.max.x - textGeometry.boundingBox.min.x;\n\n            this.textMesh = new THREE.Mesh(textGeometry, textMaterial);\n            this.textMesh.position.set(-0.5 * textWidth, 30, 10);\n            this.scene.add(this.textMesh);\n\n            // pivot\n            this.textPivot = new THREE.Object3D();\n            this.textPivot.add(this.textMesh);\n            this.scene.add(this.textPivot);\n\n            this.animate = true;\n        });\n    }\n\n\trender() {\n\t\trequestAnimationFrame(() => this.render());\n\n        if(this.animate) {\n            if (this.textPivot.rotation.y >= Math.PI / 3) {\n                this.rotationAngle = -0.015;\n            }\n\n            if (this.textPivot.rotation.y <= -(Math.PI / 3)) {\n                this.rotationAngle = 0.015;\n            }\n\n            this.textPivot.rotation.y += this.rotationAngle;\n            this.textPivot.rotation.x += this.rotationAngle / 8;\n            this.textPivot.rotation.z += this.rotationAngle / 8;\n\n            this.renderer.render(this.scene, this.camera);\n\n            this.stats.update();\n        }\n\t}\n}\n"]}